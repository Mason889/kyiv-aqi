<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="registration-form">
        <h2>Registration <div></div></h2>
        <input type="text" name="name" id="userName">
        <input type="email" name="email" id="userEmail">
        <input type="password" name="password" id="userPassword">
        <input type="password">
        <div class="flexbox">
                <a href="login">Log in</a>
                <button id="userRegister">Register account</button>
        </div>
    </div>
    
    <div class="wave background">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1170 193">
                <defs>
                        <linearGradient id="MyGradient" x1="0%" y1="10%" x2="70%" y2="0">
                          <stop offset="5%" stop-color="#4954A3" />
                          <stop offset="15%" stop-color="#563798" />
                        </linearGradient>
                      </defs>
                <path d="M1175 131.2c0 0-81-89.4-224.3-103.4S713 72 665 97c-86 46-148 63-271 7C221.7 25.5 56 104.5-4 197.4 -4 58.7-3.3 0.3-3.3 0.3L1175 0V131.2z"></path>
            </svg>
      </div>
</body>
<script>
document.getElementById('userRegister').addEventListener('click', () => {
    let userData = {
        name: document.getElementById('userName').value,
        email: document.getElementById('userEmail').value,
        password: document.getElementById('userPassword').value
    }
    console.log(userData);
    ajaxRequest({
		method: 'POST',
		url: '/register',
		data: userData
    });
    window.location = '/login';
})

function ajaxRequest(options) {
	var url = options.url || '/';
	var method = options.method || 'GET';
	var callback = options.callback || function() {};
	var data = options.data || {};
	var async = options.asynchronous || true;
	var xmlHttp = new XMLHttpRequest();

	xmlHttp.open(method, url, async);
	xmlHttp.setRequestHeader('Content-Type', 'application/json');
	xmlHttp.send(JSON.stringify(data));

	xmlHttp.onreadystatechange = function() {
		if (xmlHttp.status == 200 && xmlHttp.readyState === 4) {
			callback(xmlHttp.responseText);
		}
	};
};

</script>
</html>